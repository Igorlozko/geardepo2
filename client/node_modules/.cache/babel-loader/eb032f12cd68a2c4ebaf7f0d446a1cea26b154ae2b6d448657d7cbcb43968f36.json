{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\igorl\\\\Downloads\\\\place-to-stay-part2\\\\client\\\\src\\\\components\\\\addGear\\\\addImages\\\\progressList\\\\ProgressItem.js\",\n  _s = $RefreshSig$();\nimport { CheckCircleOutline } from '@mui/icons-material';\nimport { Box, ImageListItem } from '@mui/material';\nimport React, { useEffect, useState } from 'react';\nimport CircularProgressWithLabel from './CircularProgressWithLabel';\nimport { v4 as uuidv4 } from 'uuid';\nimport uploadFileProgress from '../../../../firebase/uploadFileProgress';\nimport { useValue } from '../../../../context/ContextProvider';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProgressItem = ({\n  file\n}) => {\n  _s();\n  const [progress, setProgress] = useState(0);\n  const [imageURL, setImageURL] = useState(null);\n  const {\n    state: {\n      currentUser\n    },\n    dispatch\n  } = useValue();\n  useEffect(() => {\n    const uploadImage = async () => {\n      const imageName = uuidv4() + '.' + file.name.split('.').pop();\n      try {\n        const url = await uploadFileProgress(file, `gears/${currentUser === null || currentUser === void 0 ? void 0 : currentUser.id}`, imageName, setProgress);\n        dispatch({\n          type: 'UPDATE_IMAGES',\n          payload: url\n        });\n        setImageURL(null);\n      } catch (error) {\n        dispatch({\n          type: 'UPDATE_ALERT',\n          payload: {\n            open: true,\n            severity: 'error',\n            message: error.message\n          }\n        });\n        console.log(error);\n      }\n    };\n    setImageURL(URL.createObjectURL(file));\n    uploadImage();\n  }, [file]);\n  return imageURL && /*#__PURE__*/_jsxDEV(ImageListItem, {\n    cols: 1,\n    rows: 1,\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: imageURL,\n      alt: \"gallery\",\n      loading: \"lazy\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: backDrop,\n      children: progress < 100 ? /*#__PURE__*/_jsxDEV(CircularProgressWithLabel, {\n        value: progress\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(CheckCircleOutline, {\n        sx: {\n          width: 60,\n          height: 60,\n          color: 'lightgreen'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 7\n  }, this);\n};\n_s(ProgressItem, \"QALTQKhSNcZgrfdlgr1Y7QJcYTQ=\", false, function () {\n  return [useValue];\n});\n_c = ProgressItem;\nexport default ProgressItem;\nconst backDrop = {\n  position: 'absolute',\n  top: 0,\n  right: 0,\n  bottom: 0,\n  left: 0,\n  display: 'flex',\n  alignItems: 'center',\n  justifyContent: 'center',\n  background: 'rgba(0,0,0, .5)'\n};\nvar _c;\n$RefreshReg$(_c, \"ProgressItem\");","map":{"version":3,"names":["CheckCircleOutline","Box","ImageListItem","React","useEffect","useState","CircularProgressWithLabel","v4","uuidv4","uploadFileProgress","useValue","jsxDEV","_jsxDEV","ProgressItem","file","_s","progress","setProgress","imageURL","setImageURL","state","currentUser","dispatch","uploadImage","imageName","name","split","pop","url","id","type","payload","error","open","severity","message","console","log","URL","createObjectURL","cols","rows","children","src","alt","loading","fileName","_jsxFileName","lineNumber","columnNumber","sx","backDrop","value","width","height","color","_c","position","top","right","bottom","left","display","alignItems","justifyContent","background","$RefreshReg$"],"sources":["C:/Users/igorl/Downloads/place-to-stay-part2/client/src/components/addGear/addImages/progressList/ProgressItem.js"],"sourcesContent":["import { CheckCircleOutline } from '@mui/icons-material';\r\nimport { Box, ImageListItem } from '@mui/material';\r\nimport React, { useEffect, useState } from 'react';\r\nimport CircularProgressWithLabel from './CircularProgressWithLabel';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport uploadFileProgress from '../../../../firebase/uploadFileProgress';\r\nimport { useValue } from '../../../../context/ContextProvider';\r\n\r\nconst ProgressItem = ({ file }) => {\r\n  const [progress, setProgress] = useState(0);\r\n  const [imageURL, setImageURL] = useState(null);\r\n  const {state:{currentUser}, dispatch} = useValue();\r\n  useEffect(() => {\r\n    const uploadImage = async () => {\r\n      const imageName = uuidv4() + '.' + file.name.split('.').pop();\r\n      try {\r\n        const url = await uploadFileProgress(\r\n          file,\r\n          `gears/${currentUser?.id}`,\r\n          imageName,\r\n          setProgress\r\n        );\r\n        dispatch({type:'UPDATE_IMAGES', payload:url})\r\n        setImageURL(null);\r\n      } catch (error) {\r\n        dispatch({type:'UPDATE_ALERT', payload:{open:true, severity:'error', message:error.message}})\r\n        console.log(error);\r\n      }\r\n    };\r\n    setImageURL(URL.createObjectURL(file));\r\n    uploadImage();\r\n  }, [file]);\r\n  return (\r\n    imageURL && (\r\n      <ImageListItem cols={1} rows={1}>\r\n        <img src={imageURL} alt=\"gallery\" loading=\"lazy\" />\r\n        <Box sx={backDrop}>\r\n          {progress < 100 ? (\r\n            <CircularProgressWithLabel value={progress} />\r\n          ) : (\r\n            <CheckCircleOutline\r\n              sx={{ width: 60, height: 60, color: 'lightgreen' }}\r\n            />\r\n          )}\r\n        </Box>\r\n      </ImageListItem>\r\n    )\r\n  );\r\n};\r\n\r\nexport default ProgressItem;\r\n\r\nconst backDrop = {\r\n  position: 'absolute',\r\n  top: 0,\r\n  right: 0,\r\n  bottom: 0,\r\n  left: 0,\r\n  display: 'flex',\r\n  alignItems: 'center',\r\n  justifyContent: 'center',\r\n  background: 'rgba(0,0,0, .5)',\r\n};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}